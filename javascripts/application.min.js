
(function(){var e,t;t={data:function(e,t,n){var r;return r=e.data(t),r==null&&(r=n.call(e),e.data(t,r)),r},unempty:function(e){return e!=null&&!/^\s+$/.test(e)},scroll:function(){return{w:e(document.body)[0].scrollWidth,h:e(document.body)[0].scrollHeight}},offset:function(e,n,r){return this.source=arguments[0].offset(),this.source.w=arguments[0].outerWidth(),this.source.h=arguments[0].outerHeight(),this.target={w:arguments[1].width(),h:arguments[1].height(),outer:{w:arguments[1].outerWidth(),h:arguments[1].outerHeight()}},this.target.padding={w:this.target.outer.w-this.target.w,h:this.target.outer.h-this.target.h},this.arrow_size=arguments[2],this.scroll=t.scroll(),arguments.length>=4&&(this.content={w:arguments[3].outerWidth(),h:arguments[3].outerHeight()},this.target.outer.w=this.content.w+this.target.padding.w,this.target.outer.h=this.content.h+this.target.padding.h),this}},t.offset.prototype={arrow:function(e){var t,n;n={left:0,top:0,position:"absolute"},t=1;switch(e){case"left":n.left=this.source.left-this.arrow_size-t,n.top=this.source.top+this.source.h/2;break;case"right":n.left=this.source.left+this.source.w+this.arrow_size+t,n.top=this.source.top+this.source.h/2;break;case"top":n.left=this.source.left+this.source.w/2,n.top=this.source.top-this.arrow_size-t;break;case"bottom":n.top=this.source.top+this.source.h+this.arrow_size+t,n.left=this.source.left+this.source.w/2}return n},auto:function(){var e,t,n;return e=this.source.top/(this.scroll.h-this.source.top),t=this.source.left/(this.scroll.w-this.source.left),n=this.scroll.w-this.source.left,this.source.left>0&&(n/=this.source.left),e>t?e>n?"top":"right":e>n?"left":"bottom"},center:function(){var e;return e={top:0,left:0},this.scroll.h>this.target.outer.h&&(e.top=(this.scroll.h-this.target.outer.h)/2),this.scroll.w>this.target.outer.w&&(e.left=(this.scroll.w-this.target.outer.w)/2),this._wrap_result(e)},top:function(){var e;return e={top:this.source.top-this.target.outer.h-this.arrow_size},this._top_bottom(e)},bottom:function(){var e;return e={top:this.source.top+this.source.h+this.arrow_size},this._top_bottom(e)},left:function(){var e;return e={left:this.source.left-this.target.outer.w-this.arrow_size},this._left_right(e)},right:function(){var e;return e={left:this.source.left+this.source.w+this.arrow_size},this._left_right(e)},_left_right:function(e){var t;return e.top=this.source.top+this.source.h/2-this.target.outer.h/2,t=e.top+this.target.outer.h-this.scroll.h,e.top<0?e.top=0:t>0&&(e.top-=t),this._wrap_result(e)},_top_bottom:function(e){var t;return e.left=this.source.left+this.source.w/2-this.target.outer.w/2,t=e.left+this.target.outer.w-this.scroll.w,e.left<0?e.left=0:t>0&&(e.left-=t),this._wrap_result(e)},_wrap_result:function(e){return e.w=this.target.w,e.h=this.target.h,this.content!=null&&(e.w=this.content.w,e.h=this.content.h),e.position="absolute",e}},window.util=t,e=jQuery,e.fn.wrapData=function(e,n){return t.data(this,e,n)},e.fn.outerHtml=function(){return e("<div>").append(this.eq(0).clone().show()).html()},e.fn.rebind=function(e,t){return this.unbind(e).bind(e,t)}}).call(this);(function(){var e,t,n;e=jQuery,t=[],n=function(t,n){return e.extend(this,n),this.self=e(t),this},n.prototype={toggle:function(){if(this.self.is(this.except))return;return this.self.hasClass("active")?(this.hide(),this.self.removeClass("active")):(this.show(),this.self.addClass("active")),this},show:function(){var t,n;return this.body=this.get_content(),t=new util.offset(this.self,this.body,this.offset),n=t[this.direction](),this.direction==="auto"?(this.direction=n,n=t[n]()):n,e("#"+this.arrow_doc_id).addClass(this.direction).css(t.arrow(this.direction)),this.body.css(n).show()},hide:function(){return this.is_remove_if_hide?this.body.remove():this.body.hide(),e("#"+this.arrow_doc_id).remove()},get_content:function(){var t,n;return t=this.self.attr("href"),typeof this.content=="function"?this.content():typeof this.content=="object"&&this.content!=null?this.content:t!=null&&t.length>1&&t[0]==="#"?(n=!0,e(t)):this.default_content()},default_content:function(){var t,n;return n=this.self.attr("data-title"),t=this.self.attr("data-content"),n!=null?n='<div class="header">'+n+"</div>":n="",t=e('<div style="display: none; max-width: '+this.max_width+'">\n  <div class="popup border">\n    '+n+'\n    <div class="body">\n      '+t+"\n    </div>\n  </div>\n</div>"),e(document.body).append('<div id="'+this.arrow_doc_id+'" class="'+this.arrow_doc_class+'"></div>'),t.appendTo(document.body),t}},e.fn.popup=function(r){var i;return r=e.extend({},e.fn.popup.defaults,r||{}),i=r.live?"live":"bind",this[i](r.trigger_name(),function(){var i;return i=e(this).wrapData(r.cache_key_suffix,function(){return new n(this,r)}),t.push(i),i.toggle(),!1})},e.fn.popup.defaults={cache_key_suffix:"popup",direction:"auto",live:!1,trigger:"click",offset:0,except:".disabled,:disabled,:animated",content:null,is_remove_if_hide:!0,arrow_doc_id:"js-arrow-popup",arrow_doc_class:"arrow-popup",max_width:"660px",trigger_name:function(){return this.trigger+"."+this.cache_key_suffix},after:{show:function(){},hide:function(){}}},e.fn.popup.constructor=n,e(document).on("click",function(){return e.each(t,function(e,t){return t.toggle()}),t=[]})}).call(this);(function(){var e,t,n;e=jQuery,t=function(t,r){return e(t).wrapData(r.cache_key_suffix,function(){return new n(t,r)})},n=function(t,n){return e.extend(this,n),this.self=e(t),this},n.prototype=e.extend({},e.fn.popup.constructor.prototype,{}),e.fn.tip=function(n){var r,i,s;return n=e.extend({},e.fn.tip.defaults,n||{}),r=n.live?"live":"bind",i=n.trigger==="hover"?"mouseenter":"foucs",s=n.trigger==="hover"?"mouseleave":"blur",n.trigger.indexOf("click")?this[r](n.trigger_name(),function(){return t(this,n).toggle(),!1}):this[r](i,function(){return t(this,n).toggle(),!1})[r](s,function(){return t(this,n).toggle(),!1}),this},e.fn.tip.defaults=e.extend({},e.fn.popup.defaults,{cache_key_suffix:"tip",offset:8,is_remove_if_hide:!0,trigger:"hover",arrow_doc_id:"js-arrow-tip",arrow_doc_class:"arrow-tip",max_width:"260px",content:function(){var t,n;return n=this.self.attr("data-title"),t=e('<div style="display: none; max-width: '+this.max_width+'">\n  <div class="tip">\n    '+n+"\n  </div>\n</div>"),e(document.body).append('<div id="'+this.arrow_doc_id+'" class="'+this.arrow_doc_class+'"></div>'),t.appendTo(document.body),t}})}).call(this);(function(){var e,t,n;e=jQuery,t=[],n=function(t,n){return e.extend(this,n),this.self=e(t),this.active=this.self,this.self.parent().is("li")&&(this.active=this.self.parent()),this},n.prototype={toggle:function(){return this.self.is(this.except)?!1:(this.active.hasClass("active")?this.hide():this.show(),!1)},show:function(){var e,t,n,r;return this.body=this.get_content(),n=this.self.offset().top,e=util.scroll().h,t=(this.self.parent().outerHeight()-this.self.outerHeight())/2,r=this.self.outerHeight()+t,e/2<n&&(r-=this.body.outerHeight(!0)+this.self.outerHeight()),this.body.css({top:r}).show(),this.active.addClass("active")},hide:function(){return this.body.hide(),this.active.removeClass("active")},get_content:function(){return this.self.next()}},e.fn.menu=function(r){var i;return r=e.extend({},e.fn.menu.defaults,r||{}),i=r.live?"live":"bind",this[i](r.trigger_name(),function(i){var s;return s=e(this).wrapData(r.cache_key_suffix,function(){return new n(this,r)}),t.push(s),s.toggle(),!1}),this},e.fn.menu.defaults=e.extend({},e.fn.popup.defaults,{cache_key_suffix:"menu",direction:"auto"}),e(document).on("click.menu",function(){return e.each(t,function(e,t){return t.hide()})})}).call(this);(function(){var e,t;e=jQuery,t=function(t,n){return e.extend(this,n),this.self=e(t),this},t.prototype={go:function(){var t,n,r,i,s,o=this;this.form_tag=this.self.closest("form");if(this.self.is(this.except))return;this.before.call(this.self),r=this.self.text().replace(/(\r|\n|\r\n|\s)+/g,""),this.self.addClass("disabled"),this.self.html(this.self.html().replace(r,"&bull;&bull;&bull;")),i=this.url(),t=this.fields();for(n in t)s=t[n],console.log(n,"=>",s);return e.ajaxSetup({beforeSend:function(t){var n;n=e("meta[name=csrf-token]").attr("content");if(n!=null)return t.setRequestHeader("X-CSRF-Token",n)}}),e.post(i,t,function(e){return o.post_after(r,e)}).error(function(e){return o.post_after(r,e)}),!1},post_after:function(e,t){return this.self.removeClass("disabled"),this.self.html(e),this.after.call(this.self,t)},fields:function(){var e;return e={},this.field(e,"input:hidden"),this.field(e,"input:text"),this.field(e,"input[type=email]"),this.field(e,"input[type=password]"),this.field(e,"select"),this.field(e,"input:radio:checked"),this.field(e,"textarea"),this.field(e,"input:checkbox:checked"),e},field:function(t,n){return e(n,this.form_tag).each(function(){if(util.unempty(this.name))return t[this.name]!=null?t[this.name]+=","+e(this).val():t[this.name]=e(this).val()}),t},url:function(){return this.form_tag.attr("action")+this.url_suffix}},e.fn.form=function(n){var r;return n=e.extend({},e.fn.form.defaults,n||{}),r=n.live?"live":"bind",this[r](n.trigger_name(),function(){return e(this).wrapData(n.cache_key_suffix,function(){return new t(this,n)}).go()}),this},e.fn.form.defaults={cache_key_suffix:"form",live:!1,trigger:"click",except:".active",url_suffix:".json",trigger_name:function(){return this.trigger+"."+this.cache_key_suffix},after:function(){},before:function(){}}}).call(this);